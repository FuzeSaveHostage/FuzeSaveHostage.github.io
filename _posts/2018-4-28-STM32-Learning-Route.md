---
layout:     post
title:      "STM32之入门--学习路线"
subtitle:   " \"STM32_Learning_Route\""
date:       2018-04-28 17:30
author:     "cm"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - 技术
---

# STM32之入门--学习路线
---
明天考计算方法，现在实在复习不下去了开始继续更- -

上一篇准备篇里说了学习stm32或者想做电赛控制类题在硬件上，软件上应该准备些什么，以及应该有什么样的知识储备。这一篇文章就假设你已经搭建好了开发环境，也买到了板子，准备知识也已经差不多，也已经自己成功的一步一步建立了工程。下面就该进入正题--如何学stm32了。

## 举个例子
加入你要做一个循迹小车，你觉得他应该分为几个部分?

（此处应有图片）

按我的理解，这个循迹小车应该分为如下几个部分

（此处也应有图片）

## 输出
说简单点，小车的最终目的就是跑。不论你用何种传感器，如何控制，最终的输出还是轮子的转速。这里的输出单元就是电机。

## 感知
既然是循迹而不是单纯的闭着眼跑直线，那这里就需要对一些量有所反馈，也就是整个系统应该处于一个闭环中。

（此处应该有闭环控制图）

比如，我应该知道所要沿着行走的线处于车的什么地方，根据这个反馈才能决定下一步速度输出。再比如，我的小车可能需要在某些位置加速和减速，那这里我就需要对速度进行反馈，根据此时速度决定下一时刻是加速还是减速。

## 通信
假设你不光想做一个自动循迹小车，你还想让他有遥控功能，这里就需要进行通信了，你应该给小车指令，命令它怎么跑，同时你可能也希望小车反馈给你一些值，这样更便于你的控制，通信就是你这个系统和其他系统或者操作者交互的途径。个人觉得这部分比较重要，以后会专门写一篇文章讲。

## 控制
上面说了需要电机来输出，需要传感器来感知反馈，需要通信模块来交互，最后就是单片机的部分了，单片机在系统中起到协调和控制的作用。

所以整个流程应该是这样，传感器采集数据，单片机对这些数据进行处理，最后把处理结果输出给电机，达到小车运动的目的，与此同时操作者可能需要对小车下达执行，指令通过通信模块发送给单片机，单片机进行处理后和其他模块配合，同样输出给电机。

## 正式开始
上面说这么多，绝不是废话。上篇文章说控制类最容易得到成就感，这里我就围绕做成一个东西至少需要的外设，以及不同外设的重要程度为路线，介绍在学习stm32时，你通过怎样的一个学习路线，可以达到最快做出一个完整的东西，以及如何最有效率的掌握stm32的学习套路。
接下来我会按顺序介绍一些外设。介绍的顺序就可以是学习的顺序，参照你手头的资料，按着这个顺序学习，在学习过程中你就可以开始如上所说的循迹小车项目，学习结束后应该就可以做出一个平衡小车了。
### GPIO
不论你是想往外输出pwm（脉宽调制，反映到车轮上就是转速），还是想通过串口通信，还是接其他模块，都需要经过GPIO。GPIO，也就是通用输入/输出（General Purpose Input Outpu），是单片机和外界交互的纽带，具体我不再赘述，你们参考的教材说的很细。你应掌握到会配置gpio为不同状态，会读取IO口电平值，会改变GPIO的输出电平，在你掌握了这些后，就可以试试点亮LED小灯了，各大店家应该都会有该实验的实例以供参考。
### 中断
中断可以说是单片机的灵魂，也是单片机实现多任务协调，提高效率的方式，针对STM32，你应了解：

1.中断的原理

2.理解中断向量表NVIC

3.明白外部中断EXTI的工作原理

4.仔细研读例程，掌握中断的代码实现方式

5.学会配置中断

这里可以通过这样一个实验来练习GPIO和外部中断：
在按完按键后让LED灯亮起来，再按一次让灯灭。
### TIM（定时器）
定时器可以说是控制的灵魂，在之后进行闭环控制时，需要由定时器来提供控制周期；在控制小车运动时，通过通用定时器来提供PWM输出来控制小车速度；在接入编码器时，由定时器来捕获脉冲。当然，还有最基础的功能，计时。这里，你应了解：


1.基本定时器，通用定时器，高级定时器的概念

2.学会配置，初始化定时器

3.学会结合中断，用定时器定时

4.学会用定时器输出PWM

上面你已经可以通过开关来控制小灯的亮灭，下面结合定时器，你可以在按键后，让小灯以2秒为周期闪烁。另一个是通过按键，使定时器输出不同的pwm给小灯，从而控制小灯的亮度。
### USART（串口）
USART算是大多数人接触的第一种通信方式，在之后你可能接触CAN通信,RS232,RS485,IIC,SPI等。但学习的套路都可以从学习串口这里牵引，而且串口十分方便易用，配合上位机或者串口助手，可以很方便的实现电脑或者手机对单片机的控制。
这里你应掌握：

1.USART工作的原理，时序，以及初步理解通信概念

2.会配置USART

3.实现通过电脑的串口调试助手给单片机发数据。

结合上面的实验，你可以试试通过电脑的串口助手来控制小灯的亮灭，小灯的亮度，小灯的闪烁频率。这里可能牵扯到通信协议的相关知识，如果觉得不太好做可以跳过，之后会专门来说通信协议。

## 结语
掌握了上述外设，基本上对于循迹小车这个项目从知识方面就没有很多问题，但是经验方面还欠积累，也可能会遇到很多问题，这里希望你最好最好能独立解决，多google，多上论坛。这里推荐开源电子网和野火论坛，好像有个51黑论坛也不错，CSDN上也有不少相关资料。不仅解决小车没有问题，你也应该掌握了stm32的学习套路，今后就算有没有接触过的外设没有用过的模块，应该也可以很快上手。
主线方面应该就到这里结束，根据这两篇文章规划的路径，你应该能很好的入门stm32，也就是知道怎么学。接下来会更一些关于PID闭环控制，通信协议，电机控制方面的文章。当然，后期也会更一些我最近比较感兴趣的方面---神经网络和机器学习相关文章。

真心希望写的这些文章能帮到你，秉着开源共享精神，我将我所学分享给你，希望你在学有所成后也可以把你的知识分享给别人，如果文章有欠缺之处欢迎指正。

原文发表于FuzeSaveHostage.github.io
